<ion-header>

    <ion-navbar>
        <button ion-button menuToggle>
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-title>Konto</ion-title>
        <ion-buttons end>
            <button ion-button (click)="addMoney()">
                <ion-icon name="add"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
    <charging-progress-bar></charging-progress-bar>
</ion-header>

<ion-menu [content]="mycontent">
    <ion-header>
        <ion-toolbar>
            <ion-title></ion-title>
        </ion-toolbar>
    </ion-header>
    <ion-content>
        <ion-list>
            <ion-item>Zahlungsvorgänge</ion-item>
            <ion-item>Auszahlung</ion-item>
            <ion-item>Rechnungen</ion-item>
        </ion-list>
    </ion-content>
</ion-menu>


<ion-content #mycontent>
    <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content></ion-refresher-content>
    </ion-refresher>

    <div class="top-container" padding="" text-center="" (click)="addMoney()">
        <h2>{{(currentBalance / 100) | currency:'EUR':true:'1.2-2'}}</h2>
        <h3>Guthaben</h3>
    </div>

    <h1>Meine Zahlungsvorgänge</h1>

    <ion-list>
        <ion-item *ngFor="let tr of paymentHistory" [ngClass]="{'status-pending': tr.type=='TokenUpdate-pending'}" (click)="openTransactionDetail(tr)">
            <div class="loader" *ngIf="tr.type=='TokenUpdate-pending'"></div>
            <span
                    class="amount"
                    [ngClass]="{'number-positive': tr.type=='Received'||tr.type=='TokenUpdate-pending'||tr.type=='TokenUpdate', 'number-negative': tr.type=='Send'}"
            >
                {{tr.amount / 100 | currency:'EUR':true:'1.2-2'}}
            </span>
            <small item-right>
                <span *ngIf="tr.type=='TokenUpdate'||tr.type=='TokenUpdate-pending'">
                    {{"payment.types." + tr.order.type | translate}}, {{ tr.order.timestamp | date:'short'}}
                </span>
                <span *ngIf="tr.type=='Send'||tr.type=='Received'">Aufladevorgang, {{tr.timestamp | date:'short'}}</span>
            </small>
        </ion-item>
    </ion-list>


    <div padding text-center *ngIf="noTransaction">
        <button ion-button text-uppercase round (click)="addMoney()">Konto aufladen</button>
    </div>

</ion-content>
