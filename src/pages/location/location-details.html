<ion-header class="transparent">
    <ion-navbar>
        <ion-buttons start>
            <button ion-button (click)="dismiss()" icon-only>
                <ion-icon name="ios-arrow-back"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>

<ion-content class="content-white">
    <div class="image-wrapper">
        <div #map id="map" (click)="detailedMap()">
        </div>
        <ion-fab right bottom edge>
            <button ion-fab color="white" class="button-shadow" (click)="openMapsApp()">
                <ion-icon name="ios-navigate-outline"></ion-icon>
            </button>
        </ion-fab>
    </div>
    <div padding>
        <span *ngIf="location.name != ''">{{location.name}}</span>
        <p>
            <strong>
                <span *ngIf="location.address != ''">{{location.address}}</span><br>
                <span *ngIf="location.city != ''">{{location.city}}</span><br>
                <span *ngIf="location.postal_code != ''">{{location.postal_code}}</span><br>
                <span *ngIf="location.country != ''">{{location.country}}</span><br>
            </strong>
        </p>

        <p *ngIf="commercialCategoryIcons && commercialCategoryIcons.length > 0" class="icons-commercial-category">
            <ion-icon *ngFor="let name of commercialCategoryIcons" name="{{ name }}"></ion-icon>
        </p>

        <div *ngIf="!showOpeningHours" margin-bottom>
            {{'location.location_details.opening_hours' | translate}} {{openingHours[today].fromTo}}
            <ion-icon (click)="showOpeningHours = !showOpeningHours" name="ios-arrow-down"></ion-icon>
        </div>
        <div *ngIf="showOpeningHours" margin-bottom>
            {{'location.location_details.opening_hours' | translate}}
            <ion-icon (click)="showOpeningHours = !showOpeningHours" name="ios-arrow-up"></ion-icon>

            <table>
                <tr *ngFor="let day of openingHours">
                    <td>{{day.name}}:</td>
                    <td>{{day.fromTo}}</td>
                </tr>
            </table>
        </div>

        <hr>

        <ion-grid class="nopadding" margin-top *ngIf="connector">
            <ion-row>
                <ion-col width-50 class="nopadding">
                    <span [innerHtml]="plugSvg" class="plug-icon"></span>
                </ion-col>
                <ion-col width-50 text-right>
                    <span *ngIf="connector.maxwattpower > 0" class="kw-box">
                        <strong>{{ maxkWh }} kW</strong>
                        <br>max.
                    </span>
                </ion-col>
            </ion-row>
        </ion-grid>

    </div>

    <div>
        <ion-slides>
            <ion-slide *ngFor="let img of locationImages">
                <img src="{{img.src}}">
            </ion-slide>
        </ion-slides>
    </div>

    <div padding="">
        <div *ngIf="location.description">
            <h6>{{'location.location_details.about' | translate}}</h6>
            <!-- don't add new lines here, because description has `white-space: pre-line;` -->
            <p class="text-line-wrap">{{location.description}}</p>
            <hr>
        </div>

        <div *ngIf="location.metadata.problemSolver">
            <h6>{{'location.location_details.contact' | translate}}</h6>
            <p>{{location.metadata.problemSolver}}</p>
        </div>

        <!-- <h6>{{'location.location_details.ratings' | translate}}</h6>

        <div *ngFor="let rating of ratings">
            <rating [(ngModel)]="rating.rating" readonly="true"></rating>
            {{rating.remark}}
            <hr>
        </div>

        <button ion-button color="secondary" small round outline (click)="feedback()" *ngIf="authService.loggedIn() && !ownerMode">+
            {{'location.location_details.write_rating' | translate}}
        </button> -->
    </div>

</ion-content>

<ion-footer>
    <!-- <charging-progress-bar></charging-progress-bar> -->
    <ion-toolbar color="light">
        <ion-grid>
            <ion-row>
                <ion-col center>

                    <h6>Available tariffs:</h6>
                    <span class="tariffs" *ngFor="let tariff of tariffs; let isLast = last">
                        {{tariff}}{{isLast ? '' : ', '}}
                    </span>
                    <!-- <div class="footer-price"> -->
                        <!-- <strong *ngIf="minPrice == maxPrice && minPrice != 0">
                            {{maxPrice | currencyDisplay }}<ng-container *ngIf="tariffType == TARIFF_TYPES.HOURLY">/h</ng-container><ng-container *ngIf="tariffType == TARIFF_TYPES.KWH">/kWh</ng-container>
                            <ng-container *ngIf="includingVat">{{'location.charging.tax' | translate}}</ng-container>
                        </strong>
                        <strong *ngIf="minPrice != maxPrice && maxPrice != 0">
                            {{minPrice | currencyDisplay }}<ng-container *ngIf="tariffType == TARIFF_TYPES.HOURLY">/h</ng-container><ng-container *ngIf="tariffType == TARIFF_TYPES.KWH">/kWh</ng-container>
                            -
                            {{maxPrice | currencyDisplay }}<ng-container *ngIf="tariffType == TARIFF_TYPES.HOURLY">/h</ng-container><ng-container *ngIf="tariffType == TARIFF_TYPES.KWH">/kWh</ng-container>
                            <ng-container *ngIf="includingVat">{{'location.charging.tax' | translate}}</ng-container>
                            <ion-icon name="ios-help-circle-outline" (click)="showHelp('price-range')" color="primary"></ion-icon>
                        </strong>
                        <strong *ngIf="minPrice == 0 && maxPrice == 0">
                            {{'location.charging.free' | translate}}
                        </strong> -->

                        <!-- <strong>
                            {{price | currencyDisplay}}
                        </strong> -->
                        
                        
                        
                    <!-- </div> -->
                    <!-- <div *ngIf="averageRating != -1" class="footer-rating">
                        <rating [(ngModel)]="averageRating" readonly="true"></rating>
                    </div> -->
                </ion-col>
                <ion-col text-right *ngIf="connector">

                    <!-- open and user can charge -->
                    <button *ngIf="location.isOpen() && !charging && !isBusy && !ownerMode" (click)="charge()" ion-button round color="primary" text-uppercase>
                        <span>{{'location.location_details.load' | translate}}</span>
                    </button>

                    <!-- user is charging -->
                    <button *ngIf="charging && !ownerMode" (click)="charge()" ion-button round color="primary" text-uppercase>
                        <span>{{'location.location_details.loading_progress' | translate}}</span>
                    </button>

                    <!-- closed -->
                    <span *ngIf="location.isClosed() && !ownerMode">{{'location.location_details.not_open' | translate}}</span>

                    <!-- open and user can charge -->
                    <button *ngIf="ownerMode" (click)="editStation()" ion-button round color="primary" text-uppercase>
                      <span>{{'location.location_details.edit' | translate}}</span>
                    </button>

                </ion-col>
            </ion-row>
        </ion-grid>
    </ion-toolbar>
</ion-footer>
