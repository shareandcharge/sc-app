<ion-header class="transparent">
    <charging-progress-bar *ngIf="chargingProgress > 0" [progress]="chargingProgress"></charging-progress-bar>
    <ion-navbar>
        <ion-buttons start>
            <button ion-button (click)="dismiss()">
                <span color="primary" showWhen="ios">Schließen</span>
                <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>

<ion-content class="content-white">
    <div class="image-wrapper">
        <div #map id="map" (click)="detailedMap()">
        </div>
        <ion-fab right bottom edge>
            <button ion-fab color="white" class="button-shadow" (click)="openMapsApp()">
                <ion-icon name="ios-navigate-outline"></ion-icon>
            </button>
        </ion-fab>
    </div>
    <div padding>
        <p><strong>{{location.address}}, {{location.city}}</strong></p>
        <p *ngIf="!showOpeningHours">
            Öffnungszeiten: {{openingHours[today].fromTo}}
            <ion-icon (click)="showOpeningHours = !showOpeningHours" name="ios-arrow-down"></ion-icon>
        </p>
        <p *ngIf="showOpeningHours">
            Öffnungszeiten:
            <ion-icon (click)="showOpeningHours = !showOpeningHours" name="ios-arrow-up"></ion-icon>
            <br><br>
            <span *ngFor="let day of openingHours">{{day.name}}: {{day.fromTo}}<br></span>
        </p>
        <hr>
        <div text-left="" style="float: left; width: 40px;">
            <span item-content [innerHtml]="plugSvg"></span>
        </div>
        <div *ngIf="connector.wattpower > 0" text-right="" style="float: right">
            {{connector.wattpower / 1000}} kW<br>Max.
        </div>
        <div style="clear: both">
        </div>
        <hr>
    </div>

    <div>
        <ion-slides>
            <ion-slide *ngFor="let img of location.images">
                <img src="{{img.src}}">
            </ion-slide>
        </ion-slides>
    </div>
    <div padding="">
        <h6>Über diese Station:</h6>
        <p>
            {{location.description}}
        </p>

        <hr>

        <h6>Problemlöser:</h6>
        <p>{{location.metadata.problemSolver}}</p>

        <h6>Bewertungen:</h6>

        <div *ngFor="let rating of ratings">
            <p>
                <rating [(ngModel)]="rating.rating" readonly="true"></rating>
                {{rating.remark}}
            </p>
            <hr>
        </div>

        <button ion-button color="secondary" small round outline (click)="feedback()" *ngIf="authService.loggedIn()">+ Bewertung schreiben</button>
    </div>

</ion-content>

<ion-footer>
    <ion-toolbar>
        <ion-grid>
            <ion-row>
                <ion-col center="">
                    <strong>1,60 - 3,20 €/kWH</strong><br>
                    <span *ngIf="averageRating != -1">
                        <rating [(ngModel)]="averageRating" readonly="true"></rating>
                    </span>
                </ion-col>
                <ion-col text-right="">
                    <button ion-button round color="primary" class="btn-start-charging" (click)="charge()">
                        Laden
                    </button>

                </ion-col>
            </ion-row>
        </ion-grid>
    </ion-toolbar>
</ion-footer>