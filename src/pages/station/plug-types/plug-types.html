<ion-header>

    <ion-navbar>
        <ion-title *ngIf="flowMode=='edit'">Ladestation bearbeiten</ion-title>
        <ion-title *ngIf="flowMode=='add'">Ladestation hinzufügen</ion-title>

        <ion-buttons end>
            <button ion-button icon-only (click)="close()">
                <ion-icon name="md-close"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>

    <progress-bar [progress]="60"></progress-bar>
</ion-header>


<ion-content padding>
    <ion-list no-lines="">

        <ion-list-header>
            Anschluss wählen
        </ion-list-header>

        <ion-item>
            <ion-label>Steckertyp</ion-label>
        </ion-item>
        <ion-item>
            <ion-select [(ngModel)]="connector.plugtype"
                        multiple="false"
                        class="select-multiline input-white"
                        [selectOptions]="{title: 'Steckertypen'}"
                        placeholder="Bitte wählen ..."
                        cancelText="Abbrechen" okText="OK"
                        (ngModelChange)="plugTypeDirty()"
            >
                <ion-option *ngFor="let plug of plugOptions" value="{{plug.id}}">{{plug.name}}</ion-option>
            </ion-select>
        </ion-item>

        <div *ngIf="errorMessages.plugType" class="alert-box alert-box-danger" margin>{{ errorMessages.plugType }}</div>

        <ion-item>
            <ion-label>Leistung</ion-label>
        </ion-item>
        <ion-item>
            <ion-select [(ngModel)]="wattpowerTemp"
                        multiple="false"
                        class="select-multiline input-white"
                        [selectOptions]="{title: 'Leistung'}"
                        placeholder="Bitte wählen ..."
                        cancelText="Abbrechen" okText="OK"
                        (ngModelChange)="updateWattpower()"
            >
                <ion-option value="2.3">2.3 kWh</ion-option>
                <ion-option value="3.7">3.7 kWh</ion-option>
                <ion-option value="4.6">4.6 kWh</ion-option>
                <ion-option value="7.4">7.4 kWh</ion-option>
                <ion-option value="11">11 kWh</ion-option>
                <ion-option value="22">22 kWh</ion-option>
                <ion-option value="43">43 kWh</ion-option>

            </ion-select>
        </ion-item>

        <div *ngIf="errorMessages.capacity" class="alert-box alert-box-danger" margin>{{ errorMessages.capacity }}</div>

        <ion-item>
            <ion-checkbox [(ngModel)]="connector.metadata.accessControl" class="item-partial-cover"></ion-checkbox>
            <ion-label>Share&Charge Modul</ion-label>
            <ion-icon name="ios-help-circle-outline" item-right (click)="showHelp('accessControl')"
                      color="primary"></ion-icon>
        </ion-item>

        <ion-item>
            <!-- for now turned off, see: https://github.com/slockit/sc-app/issues/203 -->
            <ion-checkbox [(ngModel)]="connector.metadata.kwh" disabled="{{true || !connector.metadata.accessControl}}"
                          class="item-partial-cover"></ion-checkbox>
            <ion-label>kWh genaue Abrechnung</ion-label>
            <ion-icon name="ios-help-circle-outline" item-right (click)="showHelp('kwh')" color="primary"></ion-icon>
        </ion-item>

    </ion-list>

    <div padding text-center>
        <button ion-button round (click)="nextPage()" text-uppercase outline block>Weiter</button>
        <button ion-button round *ngIf="flowMode==='edit'" (click)="saveChanges()" text-uppercase block>Änderungen
            speichern
        </button>
    </div>
</ion-content>
