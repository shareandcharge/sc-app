<ion-header>

    <ion-navbar>
        <ion-title>Station hinzufügen</ion-title>
        <ion-buttons end>
            <button ion-button (click)="skipAddingStation()">
                Abbrechen
            </button>
        </ion-buttons>
    </ion-navbar>

</ion-header>


<ion-content>
    <ion-grid>
        <ion-row>
            <ion-col>

                <div class="image-wrapper">
                    <div #map id="map" (click)="detailedMap()">
                    </div>
                </div>

                <ion-item no-lines>
                    <ion-label floating>Type Station Address</ion-label>
                    <ion-input type="text" [(ngModel)]="locObject.address" (input)="updateSearch()" ></ion-input>
                </ion-item>
                <ion-list>
                    <ion-item *ngFor="let item of autocompleteItems" tappable (click)="chooseItem(item)">
                        <ion-icon name="pin" item-left></ion-icon>
                        {{ item.description }}
                    </ion-item>
                </ion-list>

                <ion-segment color="primary" [(ngModel)]="segmentTabs" padding>
                    <ion-segment-button value="default">
                        Öffnungszeiten
                    </ion-segment-button>
                    <ion-segment-button value="custom">
                        Anpassen
                    </ion-segment-button>
                </ion-segment>

                <div *ngIf="segmentTabs == 'default'">
                    <ion-item no-lines>
                        <ion-label>Von</ion-label>
                        <ion-select [(ngModel)]="from" (ngModelChange)="updateSelectedDays()">
                            <ion-option value="9" selected="true">9:00</ion-option>
                            <ion-option value="10">10:00</ion-option>
                            <ion-option value="11">11:00</ion-option>
                            <ion-option value="12">12:00</ion-option>
                            <ion-option value="13">13:00</ion-option>
                            <ion-option value="14">14:00</ion-option>
                            <ion-option value="15">15:00</ion-option>
                            <ion-option value="16">16:00</ion-option>
                            <ion-option value="17">17:00</ion-option>
                            <ion-option value="18">18:00</ion-option>
                            <ion-option value="19">19:00</ion-option>
                        </ion-select>
                    </ion-item>

                    <ion-item no-lines>
                        <ion-label>Bis</ion-label>
                        <ion-select [(ngModel)]="to" (ngModelChange)="updateSelectedDays()">
                            <ion-option value="9" selected="true">9:00</ion-option>
                            <ion-option value="10">10:00</ion-option>
                            <ion-option value="11">11:00</ion-option>
                            <ion-option value="12">12:00</ion-option>
                            <ion-option value="13">13:00</ion-option>
                            <ion-option value="14">14:00</ion-option>
                            <ion-option value="15">15:00</ion-option>
                            <ion-option value="16">16:00</ion-option>
                            <ion-option value="17">17:00</ion-option>
                            <ion-option value="18">18:00</ion-option>
                            <ion-option value="19">19:00</ion-option>
                        </ion-select>
                    </ion-item>

                    <ion-item no-lines>
                        <ion-label>Tage</ion-label>
                        <ion-select multiple="true" [(ngModel)]="weekdays" (ngModelChange)="updateSelectedDays()">
                            <ion-option value="monday">Montag</ion-option>
                            <ion-option value="tuesday">Dienstag</ion-option>
                            <ion-option value="wednesday">Mittwoch</ion-option>
                            <ion-option value="thursday">Donnerstag</ion-option>
                            <ion-option value="friday">Fritag</ion-option>
                            <ion-option value="saturday">Samstag</ion-option>
                            <ion-option value="sunday">Sonntag</ion-option>
                        </ion-select>
                    </ion-item>
                </div>

                <div *ngIf="segmentTabs == 'custom'">
                    <ion-item *ngFor="let day of locObject.stations.openingHours">
                        <ion-label>{{day.text}}</ion-label>
                        <ion-checkbox [(ngModel)]="day.enabled"
                                      (ngModelChange)="updateCustomSelectedDays()"></ion-checkbox>
                        <ion-select [(ngModel)]="day.from" (ngModelChange)="updateCustomSelectedDays()">
                            <ion-option value="from" selected="true">From</ion-option>
                            <ion-option *ngFor="let t of dayHours" [value]="t.value">{{t.title}}</ion-option>
                        </ion-select>
                        <ion-select [(ngModel)]="day.to" (ngModelChange)="updateCustomSelectedDays()">
                            <ion-option value="from" selected="true">To</ion-option>
                            <ion-option *ngFor="let t of dayHours" [value]="t.value">{{t.title}}</ion-option>
                        </ion-select>
                    </ion-item>
                </div>

                <ion-item no-lines>
                    <ion-label floating>Problemlöser</ion-label>
                    <ion-textarea [(ngModel)]="locObject.problemSolver"></ion-textarea>
                </ion-item>

                <ion-item no-lines>
                    <ion-label floating>Beschreibung</ion-label>
                    <ion-textarea [(ngModel)]="locObject.descriptions"></ion-textarea>
                </ion-item>
            </ion-col>
        </ion-row>
    </ion-grid>
    <div>
        <button ion-button (click)="continueAddStation()">Weiter</button>
        <button *ngIf="flowMode == 'edit'" ion-button (click)="deleteStation()">Delete</button>
    </div>
</ion-content>
